<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Demographics</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .hidden { display: none; }
    </style>
</head>
<body class="bg-light">
<div class="container mt-5">
    <div class="card shadow">
        <div class="card-body">
            <h1 class="card-title text-center mb-4">Demographics</h1>

            {% if error %}
                <div class="alert alert-danger">{{ error }}</div>
            {% endif %}

            <form method="POST">
                <!-- Gender -->
                <div class="mb-3">
                    <label class="form-label">1. What best describes your gender?</label>
                    <select name="gender" id="gender" class="form-select" required onchange="handleOther(this, 'gender_other')">
                        <option value="" disabled selected>Select...</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Prefer not to say">Prefer not to say</option>
                        <option value="Self-describe">Self-describe</option>
                    </select>
                    <input type="text" name="gender_other" id="gender_other" class="form-control mt-2 hidden" placeholder="Please specify">
                </div>

                <!-- Age -->
                <div class="mb-3">
                    <label class="form-label">2. How old are you?</label>
                    <select name="age_group" class="form-select" required>
                        <option value="" disabled selected>Select...</option>
                        <option value="15 or younger">15 or younger</option>
                        <option value="16–24">16–24</option>
                        <option value="25–34">25–34</option>
                        <option value="35–44">35–44</option>
                        <option value="45–54">45–54</option>
                        <option value="55–64">55–64</option>
                        <option value="65 or older">65 or older</option>
                    </select>
                </div>

                <!-- Country -->
                <div class="mb-3">
                    <label class="form-label">3. Which country do you live in?</label>
                    <select name="country" id="country" class="form-select" required onchange="handleOther(this, 'country_other')">
                        <option value="" disabled selected>Select...</option>
                        <option value="United States">United States</option>
                        <option value="United Kingdom">United Kingdom</option>
                        <option value="Other">Other</option>
                    </select>
                    <input type="text" name="country_other" id="country_other" class="form-control mt-2 hidden" placeholder="Please specify">
                </div>

                <!-- Occupation -->
                <div class="mb-3">
                    <label class="form-label">4. Which of these best describes the occupation of the main income earner in your household?</label>
                    <select name="occupation" id="occupation" class="form-select" required onchange="handleOther(this, 'occupation_other')">
                        <option value="" disabled selected>Select...</option>
                        <option>Very senior management, top level civil servant or professional</option>
                        <option>Administrative or junior management/professional</option>
                        <option>Intermediate management in large company, owner/director of small business</option>
                        <option>Skilled manual worker</option>
                        <option>Manual worker</option>
                        <option>Casual worker or unemployed &lt;6 months</option>
                        <option>Housewife / house husband / fulltime carer</option>
                        <option>Student in fulltime education</option>
                        <option>Retired on state pension only</option>
                        <option>Unemployed for &gt;6 months</option>
                        <option>Prefer not to say</option>
                        <option value="Other">Other</option>
                    </select>
                    <input type="text" name="occupation_other" id="occupation_other" class="form-control mt-2 hidden" placeholder="Please specify">
                </div>

                <!-- Submit -->
                <div class="text-end">
                    <button type="submit" class="btn btn-primary">Continue</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
function handleOther(selectElement, inputId) {
    const input = document.getElementById(inputId);
    if (selectElement.value === "Other" || selectElement.value === "Self-describe") {
        input.classList.remove("hidden");
        input.setAttribute("required", "required");
    } else {
        input.classList.add("hidden");
        input.removeAttribute("required");
        input.value = "";
    }
}
</script>
</body>
</html>
